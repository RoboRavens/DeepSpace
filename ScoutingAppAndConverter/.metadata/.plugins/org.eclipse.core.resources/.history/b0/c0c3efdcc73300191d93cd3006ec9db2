import java.io.File;
import java.util.Scanner;

public class main extends (searchForFiles, cleanup){
	
	static Scanner scans = new Scanner(System.in);
	static String name;
	
	final static int SLEEP_TIME = 3000;
	
	public static void main(String[] args) {
		//System.out.println("Enter the file you want to convert here: ");
		//name = scans.nextLine();
		name = listPeers();
		if (name == "ERROR!") {
			System.out.println("Whoops! No unconverted files found.\nRemove the _converted in files to make them convert again.\n\nEXAMPLE:\nT5124_converted.fmt --> T5124.fmt");
			try {
				Thread.sleep(SLEEP_TIME * 3);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		} else {
			File filed = new File(name);
			importFMT importer = new importFMT(filed);
			exportCSV exporter = new exportCSV(importer);
		
			System.out.println("Converting: " + name.replace(".\\", "\\"));
			
			importing(importer);
			
			System.out.println("Exporting: " + (name.replace(".\\", "\\")).replace(".fmt", ".csv"));
			
			exporting(importer, exporter);
			
			System.out.println("Cleaning up...\n");
			
			filed.renameTo(new File(name.replace(".fmt", "_converted.fmt")));
			System.out.println("Disabled old file!");
			moveToSelf(filed, ".txt", "byproduct");
			moveToSelf(filed, ".csv", "output");
			
			System.out.println("\nClean complete! Thank you for using FMTtoCSV!\nMay all your radios connect!");
			try {
				Thread.sleep(SLEEP_TIME);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
	public static void importing(importFMT importerer) {
		importerer.Grab();
	}
	public static void exporting(importFMT importerer, exportCSV exporterer) {
		importerer.halt();
		exporterer.steal();
		exporterer.write(name.replace(".fmt", ".txt"));
		exporterer.halt();
	}
}
